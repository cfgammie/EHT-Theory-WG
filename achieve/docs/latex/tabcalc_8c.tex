\hypertarget{tabcalc_8c}{}\section{Fits/tabcalc.c File Reference}
\label{tabcalc_8c}\index{Fits/tabcalc.\+c@{Fits/tabcalc.\+c}}


Computes new values for the specified table column using the input arithmetic expression.  


{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include \char`\"{}fitsio.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int {\bfseries main} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})\hypertarget{tabcalc_8c_a0ddf1224851353fc92bfbff6f499fa97}{}\label{tabcalc_8c_a0ddf1224851353fc92bfbff6f499fa97}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
Computes new values for the specified table column using the input arithmetic expression. 

Use\+: tabcalc intable expression colname outtable

Computes new values for the specified table column using the input arithmetic expression, which may be a function of the values in other table columns or keyword values. The input file is first copied to the output file, then the output file is updated with the new column values. If the column doesn\textquotesingle{}t already exist, then a new column will be appended to the table. Instead of supplying the arithmetic expression directly on the command line, you can also put the expression in an A\+S\+C\+II text file, and supply the name of the text file prepended with the \textquotesingle{}@\textquotesingle{} character.

The following arithmetic operators and functions may be used in the expression\+: \begin{DoxyVerb}"addition"         +          "subtraction"        -
"multiplication"   *          "division"           /
"negation"         -          "exponentiation"     **   ^
"absolute value"   abs(x)     "cosine"             cos(x)
"sine"             sin(x)     "tangent"            tan(x)
"arc cosine"       arccos(x)  "arc sine"           arcsin(x)
"arc tangent"      arctan(x)  "arc tangent"        arctan2(x,y)
"exponential"      exp(x)     "square root"        sqrt(x)
"natural log"      log(x)     "common log"         log10(x)
"modulus"          i % j      "random # [0.0,1.0)" random()
"minimum"          min(x,y)   "maximum"            max(x,y)
"if-then-else"     b?x:y
\end{DoxyVerb}


Note that the fitscopy program can perform the same operations as tabcalc, using a slightly different command line syntax.

Examples\+:


\begin{DoxyItemize}
\item tabcalc in.\+fit+1 \textquotesingle{}X+0.5\textquotesingle{} Xc out.\+fit -\/ calculate new Xc column

fitscopy \textquotesingle{}in.\+fit+1\mbox{[}col Xc=X+0.5\mbox{]}\textquotesingle{} out.\+fit -\/ same as above
\item tabcalc in.\+fit+1 .txt Xc out.\+fit -\/ read expression from file
\end{DoxyItemize}

Other example expressions\+:

\textquotesingle{}counts/\#exposure\textquotesingle{} -\/ divide counts column by E\+X\+P\+O\+S\+U\+RE keyword

\textquotesingle{}counts $>$ 0 ? counts/\#exposure \+: -\/99\textquotesingle{} -\/ if counts column is greater than 0 then divide counts by the exposure keyword, otherwise set the value equal to -\/99.

\textquotesingle{}(counts\{-\/1\} $\ast$ 0.\+25 + counts $\ast$ 0.\+5 + counts\{+1\} $\ast$ 0.\+25) / 3.\textquotesingle{} compute weighted running mean of counts by averaging the values in the previous row, the current row, and the next row. The row offset is enclosed in curly brackets.

Version 1.\+0\+: September 29, 2017 (DP)

\begin{DoxyAuthor}{Author}
Dimitrios Psaltis (updated from \href{https://heasarc.gsfc.nasa.gov/docs/software/fitsio/cexamples.html}{\tt https\+://heasarc.\+gsfc.\+nasa.\+gov/docs/software/fitsio/cexamples.\+html})
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+0
\end{DoxyVersion}
\begin{DoxyDate}{Date}
September 29, 2017
\end{DoxyDate}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000009}{Bug}]No known bugs\end{DoxyRefDesc}


\begin{DoxyWarning}{Warning}
no warnings
\end{DoxyWarning}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000009}{Todo}]nothing left\end{DoxyRefDesc}
